{
    "settings": {
        "index": {
            "max_result_window": 100000,
            "mapping": {
                "total_fields": {
                    "limit": 10000
                }
            }
        },
        "analysis": {
            "char_filter": {
                "hyphen_mapping": {
                    "type": "mapping",
                    "mappings": [
                        "-=>"
                    ]
                },
                "non_numeric_remover": {
                    "type": "pattern_replace",
                    "pattern": "[^0-9]+",
                    "replacement": " "
                }
            },
            "analyzer": {
                "completer": {
                    "filter": "custom_edge_ngram",
                    "tokenizer": "lowercase",
                    "type": "custom"
                },
                "softmatcher": {
                    "type": "custom",
                    "tokenizer": "standard",
                    "filter": ["lowercase", "ascii_folder", "swedish_snowball"]
                },
                "isbn_analyzer": {
                    "tokenizer": "standard",
                    "char_filter": [
                        "hyphen_mapping"
                    ],
                    "filter": [
                        "lowercase"
                    ]
                },
                "numeric_extractor": {
                    "filter": [
                        "numeric_keeper"
                    ],
                    "tokenizer": "numeric_keeper_tokenizer"
                }
            },
            "tokenizer": {
                "numeric_keeper_tokenizer": {
                    "type": "pattern",
                    "group": 1,
                    "pattern": "([0-9]{4})"
                }
            },
            "filter": {
                "custom_edge_ngram": {
                    "max_gram": 50,
                    "min_gram": 2,
                    "type": "edgeNGram"
                },
                "numeric_keeper": {
                    "type": "pattern_capture",
                    "preserve_original": false,
                    "patterns": [
                        "([0-9]{4})"
                    ]
                },
                "swe_light_stemmer": {
                    "name": "light_swedish",
                    "type": "stemmer"
                },
                "swedish_snowball": {
                    "type": "snowball",
                    "language": "Swedish"
                },
                "ascii_folder": {
                    "type": "asciifolding",
                    "preserve_original": true
                }
            }
        }
    },
    "mappings": {
        "_default_": {
            "_source": {
                "enabled": true
            },
            "_all": {
                "enabled": true
            },
            "properties": {
                "index": {
                    "type": "object",
                    "enabled": false
                },
                "meta": {
                    "properties": {
                        "created": {
                          "type": "date"
                        },
                        "modified": {
                          "type": "date"
                        },
                        "generationDate": {
                          "type": "date"
                        }
                    }
                },
                "identifiedBy": {
                    "type": "nested",
                    "include_in_parent": true,
                    "properties": {
                        "@type": {"type": "keyword"},
                        "value": {
                            "type": "text",
                            "analyzer": "isbn_analyzer"
                        }
                    }
                },
                "publication": {
                    "properties": {
                        "year": {
                            "fields": {
                                "keyword": {
                                    "index": true,
                                    "type": "keyword"
                                }
                            },
                            "analyzer": "numeric_extractor",
                            "index": true,
                            "type": "text",
                            "fielddata": true
                        }
                    }
                },
                "hasTitle": {
                    "type": "nested",
                    "include_in_parent": true,
                    "properties": {
                        "@type": {"type": "keyword"},
                        "mainTitle": {
                            "type": "text",
                            "fields": {
                                "keyword": {
                                    "type": "keyword"
                                }
                            }
                        }
                    }
                }
            },
            "date_detection": false,
            "dynamic_templates": [
                {
                    "context_template": {
                        "mapping": {
                            "type": "object",
                            "enabled": false
                        },
                        "match": "@context"
                    }
                },
                {
                    "id_template": {
                        "mapping": {
                            "index": true,
                            "type": "keyword"
                        },
                        "match": "@id",
                        "match_mapping_type": "string"
                    }
                },
                {
                    "type_template": {
                        "mapping": {
                            "index": true,
                            "type": "keyword"
                        },
                        "match": "@type",
                        "match_mapping_type": "string"
                    }
                },
                {
                    "unknown_template": {
                        "path_match": "_marc*.*.subfields.*",
                        "mapping": {
                            "type": "string",
                            "index": "not_analyzed"
                        },
                        "match_mapping_type": "string"
                    }
                },
                {
                    "soft_template": {
                        "mapping": {
                            "fields": {
                              "exact": {
                                "type": "text",
                                "analyzer": "standard"
                              }
                            },
                            "analyzer": "softmatcher",
                            "type": "text",
                            "index": true
                        },
                        "match": "*",
                        "match_mapping_type": "string"
                    }
                }
            ]
        }
    }
}
